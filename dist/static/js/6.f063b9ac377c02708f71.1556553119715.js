webpackJsonp([6],{"9Lt3":function(e,t){},"9Xge":function(e,t,s){"use strict";var r=s("6iV/"),o={name:"select_shop_tree",props:{msg:{type:Object},groupTopBool:{type:Boolean,default:!1},storeTopBool:{type:Boolean,default:!1}},data:function(){return{options:[{value:"0",label:"所有门店"},{value:"1",label:"门店分组"},{value:"2",label:"部分门店"}],defaultProps:{children:"children",label:"storeGroupName"},value:"0",dataObj:[],showShopTree:!1,showSearchList:!1,shopGroupValue:"已选择0个门店分组",searchShop:"",searchValue:"",searchValueList:"",searchOptions:[],selectList:[],selecData:[],selecData2:[],selecDataName:[],selecDataId:[],selectListId:[],selectListGroupId:[],keysArr:[],sendGroupObj:{},sendStoreObj:{},storeList:[]}},watch:{msg:function(e,t){this.init(e)}},created:function(){this.init(this.msg)},mounted:function(){this.getGroupTreeData()},methods:{init:function(e){var t=this;if(e.storeType){if(this.value=e.storeType.toString(),"1"==this.value){if(this.selecDataName.splice(0,this.selecDataName.length),this.keysArr.splice(0,this.keysArr.length),this.shopGroupValue="已选择"+e.storeGroupIds.split(",").length+"个门店分组",e.storeGroupIds.split(",").forEach(function(e){t.keysArr.push(e)}),this.selecData=[],e.storeList)e.storeList.length>0&&(this.selecData=e.storeList);else{var s=[];e.storeGroupIds.split(",").forEach(function(e){var t={};t.storeGroupId=e,t.storeId=null,s.push(t)}),this.selecData=s}this.sendGroupObj.storeGroupIds=e.storeGroupIds,this.sendGroupObj.storeIds="",this.sendGroupObj.storeType=this.value,this.sendGroupObj.storeList=e.storeList}else if("2"==this.value){if(this.keysArr.splice(0,this.keysArr.length),this.shopGroupValue="已选择0个门店分组",this.selecDataName.splice(0,this.selecDataName.length),e.storeName.split(",").forEach(function(e){t.selecDataName.push(e)}),this.selectListId.splice(0,this.selectListId.length),e.storeIds.split(",").forEach(function(e){t.selectListId.push(e)}),this.selecData2=[],e.storeList)e.storeList.length>0&&(this.selecData2=e.storeList);else{var r=[];e.storeIds.split(",").forEach(function(e){var t={storeGroupId:null};t.storeId=e,r.push(t)}),this.selecData2=r}this.sendStoreObj.storeType=this.value,this.sendStoreObj.storeGroupIds=e.storeGroupIds,this.sendStoreObj.storeIds=e.storeIds,this.sendStoreObj.storeList=e.storeList}else"0"==this.value&&(this.keysArr.splice(0,this.keysArr.length),this.selecDataName.splice(0,this.selecDataName.length),this.selectListId.splice(0,this.selectListId.length),this.keysArr.splice(0,this.keysArr.length),this.shopGroupValue="已选择0个门店分组");this.getGroupTreeData()}},getGroupTreeData:function(){var e=this;this.axios.get("/api-admin/store-group-list",{params:{requestProject:"middle-ground"}}).then(function(t){var s=t.data;0==s.errorCode?e.dataObj=s.result:e.$message.error(s.message)})},getSearchData:function(e){var t=this;e&&this.axios.post("/api-plug/query-store-by-code-name",r.stringify({requestProject:"middle-ground",searchParam:this.searchValueList,selectedIds:this.selectListId.join(","),flag:"1"})).then(function(e){var s=e.data;0==s.errorCode?t.selectList=s.result:t.$message.error(s.message)})},selectShop:function(e){this.showShopTree=!1,this.showSearchList=!1;var t={};t.storeType=parseInt(e),"0"==e?(t.storeGroupIds="",t.storeIds="",this.$emit("sendSelectGroupData",t)):"1"==e?(this.sendGroupObj.storeType=parseInt(e),this.$emit("sendSelectGroupData",this.sendGroupObj)):"2"==e&&(this.sendStoreObj.storeType=parseInt(e),this.$emit("sendSelectGroupData",this.sendStoreObj))},toggleShopTree:function(){this.showShopTree=!this.showShopTree},groupBtnSure:function(){this.showShopTree=!1;var e=this.$refs.shopGroupTree.getCheckedKeys(),t=e.length,s=e.join(","),r=[];e.forEach(function(e){var t={};t.storeGroupId=e,t.storeId=null,r.push(t)}),this.shopGroupValue="已选择"+t+"个门店分组",this.sendGroupObj={},this.sendGroupObj.storeGroupIds=s,this.sendGroupObj.storeIds="",this.sendGroupObj.storeType=parseInt(this.value),this.sendGroupObj.storeList=r,this.$emit("sendSelectGroupData",this.sendGroupObj)},toggleSearchShop:function(){this.showSearchList=!this.showSearchList},showSearchTree:function(){this.showSearchList=!0},hideSearch:function(){this.showSearchList=!1},hideTree:function(){this.showShopTree=!1,this.showSearchList=!1},selectShopSuccess:function(e,t){this.selecData2.push(e),this.selecDataName.push(e.storeName),this.selectList.splice(t,1),this.selectListId.push(e.storeId),this.selectListGroupId.push(e.storeGroupId);var s=[];this.selecData2.forEach(function(e){var t={};t.storeGroupId=e.storeGroupId,t.storeId=e.storeId,s.push(t)}),this.sendStoreObj={},this.sendStoreObj.storeType=parseInt(this.value),this.sendStoreObj.storeGroupIds=this.selectListGroupId.join(","),this.sendStoreObj.storeIds=this.selectListId.join(","),this.sendStoreObj.storeList=s,this.$emit("sendSelectGroupData",this.sendStoreObj)},removeData:function(e){this.selecData2.splice(e,1),this.selecDataName.splice(e,1),this.selectListId.splice(e,1),this.selectListGroupId.splice(e,1);var t=[];this.selecData2.forEach(function(e){var s={};s.storeGroupId=e.storeGroupId,s.storeId=e.storeId,t.push(s)}),this.sendStoreObj={},this.sendStoreObj.storeType=parseInt(this.value),this.sendStoreObj.storeGroupIds=this.selectListGroupId.join(","),this.sendStoreObj.storeIds=this.selectListId.join(","),this.sendStoreObj.storeList=t,this.$emit("sendSelectGroupData",this.sendStoreObj)}}},a={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"select-shop-wrap"},[s("el-select",{staticClass:"select-shop fl",attrs:{placeholder:"请选择"},on:{change:e.selectShop},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"1"==e.value,expression:"value == '1'"}],staticClass:"all-style-wrap fl"},[s("el-popover",{staticClass:"vertical-baseline",attrs:{"popper-class":"store-group-wrap",placement:"bottom-start",trigger:"click"},model:{value:e.showShopTree,callback:function(t){e.showShopTree=t},expression:"showShopTree"}},[s("div",{staticClass:"select-shop select-shop-rt",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.shopGroupValue))]),e._v(" "),s("div",{staticClass:"select-shop-url-wrap",class:{"group-top-318":e.groupTopBool}},[s("div",{staticClass:"shop-tree-wrap"},[s("el-tree",{ref:"shopGroupTree",attrs:{data:e.dataObj,"show-checkbox":"","default-expand-all":"","default-checked-keys":e.keysArr,"node-key":"storeGroupId","highlight-current":"",props:e.defaultProps}})],1),e._v(" "),s("div",{staticClass:"select-group-btn"},[s("el-row",[s("el-button",{staticStyle:{color:"#303133"},attrs:{type:"text",size:"small"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.hideTree(t)}}},[e._v("取消")]),e._v(" "),s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.groupBtnSure(t)}}},[e._v("确定")])],1)],1)])])],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"2"==e.value,expression:"value == '2'"}],staticClass:"all-style-wrap fl"},[s("el-popover",{staticClass:"vertical-baseline",attrs:{placement:"bottom-start",trigger:"click"},model:{value:e.showSearchList,callback:function(t){e.showSearchList=t},expression:"showSearchList"}},[s("div",{staticClass:"select-shop el-input dm-store__reference select-shop-total",attrs:{slot:"reference"},slot:"reference"},[s("div",{staticClass:"select-shop-selected"},e._l(e.selecDataName,function(t,r){return s("el-tag",{key:r,attrs:{size:"small",closable:""},on:{close:function(t){return e.removeData(r)}}},[e._v(e._s(t))])}),1),e._v(" "),s("el-popover",{attrs:{placement:"top-start","popper-class":"select-shop__popper",width:"300",trigger:"hover"}},[e._l(e.selecDataName,function(t,r){return s("el-tag",{key:r,staticClass:"dm-store__total--tag",attrs:{size:"small",closable:""},on:{close:function(t){return e.removeData(r)}}},[e._v(e._s(t))])}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.selecDataName.length,expression:"selecDataName.length"}],staticClass:"total-tip",attrs:{slot:"reference"},slot:"reference"},[e._v("共"+e._s(e.selecDataName.length)+"项")])],2)],1),e._v(" "),s("div",{staticClass:"select-shop-url-wrap search-shop-wrap"},[s("div",{staticClass:"search-shop-input"},[s("el-input",{staticClass:"input-name",attrs:{"prefix-icon":"el-icon-search",size:"small",clearable:"",placeholder:"输入搜索内容"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getSearchData(e.searchValueList)}},model:{value:e.searchValueList,callback:function(t){e.searchValueList=t},expression:"searchValueList"}})],1),e._v(" "),s("div",{staticClass:"search-shop-list"},[e.selectList.length>0?s("ul",e._l(e.selectList,function(t,r){return s("li",{key:r,on:{click:function(s){return s.preventDefault(),s.stopPropagation(),e.selectShopSuccess(t,r)}}},[s("span",[e._v(e._s(t.storeName))])])}),0):s("p",{staticClass:"no-data"},[e._v("无搜索内容")]),e._v(" "),s("p",{staticClass:"search-list-tip"},[e._v("最多显示5条数据")])])])])],1)],1)},staticRenderFns:[]};var i=s("C7Lr")(o,a,!1,function(e){s("9Lt3")},"data-v-5bcf6eba",null);t.a=i.exports},"BZf+":function(e,t){},K93f:function(e,t){e.exports="data:image/png;base64,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"},"mw/H":function(e,t){},qopJ:function(e,t,s){"use strict";var r=s("6iV/"),o={name:"select_shop_tree",props:{msg:{type:Object},groupTopBool:{type:Boolean,default:!1},storeTopBool:{type:Boolean,default:!1}},data:function(){return{options:[{value:"0",label:"所有门店"},{value:"1",label:"门店分组"},{value:"2",label:"部分门店"}],defaultProps:{children:"children",label:"storeGroupName"},value:"0",dataObj:[],showShopTree:!1,showSearchList:!1,shopGroupValue:"已选择0个门店分组",searchShop:"",searchValue:"",searchValueList:"",searchOptions:[],selectList:[],selecData:[],selecData2:[],selecDataName:[],selecDataId:[],selectListId:[],selectListGroupId:[],keysArr:[],sendGroupObj:{},sendStoreObj:{},storeList:[]}},watch:{msg:function(e,t){this.init(e)}},created:function(){this.init(this.msg)},mounted:function(){this.getGroupTreeData()},methods:{init:function(e){var t=this;if(e.storeType){if(this.value=e.storeType.toString(),"1"==this.value){if(this.selecDataName.splice(0,this.selecDataName.length),this.keysArr.splice(0,this.keysArr.length),this.shopGroupValue="已选择"+e.storeGroupIds.split(",").length+"个门店分组",e.storeGroupIds.split(",").forEach(function(e){t.keysArr.push(e)}),this.selecData=[],e.storeList)e.storeList.length>0&&(this.selecData=e.storeList);else{var s=[];e.storeGroupIds.split(",").forEach(function(e){var t={};t.storeGroupId=e,t.storeId=null,s.push(t)}),this.selecData=s}this.sendGroupObj.storeGroupIds=e.storeGroupIds,this.sendGroupObj.storeIds="",this.sendGroupObj.storeType=this.value,this.sendGroupObj.storeList=e.storeList}else if("2"==this.value){if(this.keysArr.splice(0,this.keysArr.length),this.shopGroupValue="已选择0个门店分组",this.selecDataName.splice(0,this.selecDataName.length),e.storeName.split(",").forEach(function(e){t.selecDataName.push(e)}),this.selectListId.splice(0,this.selectListId.length),e.storeIds.split(",").forEach(function(e){t.selectListId.push(e)}),this.selecData2=[],e.storeList)e.storeList.length>0&&(this.selecData2=e.storeList);else{var r=[];e.storeIds.split(",").forEach(function(e){var t={storeGroupId:null};t.storeId=e,r.push(t)}),this.selecData2=r}this.sendStoreObj.storeType=this.value,this.sendStoreObj.storeGroupIds=e.storeGroupIds,this.sendStoreObj.storeIds=e.storeIds,this.sendStoreObj.storeList=e.storeList}else"0"==this.value&&(this.keysArr.splice(0,this.keysArr.length),this.selecDataName.splice(0,this.selecDataName.length),this.selectListId.splice(0,this.selectListId.length),this.keysArr.splice(0,this.keysArr.length),this.shopGroupValue="已选择0个门店分组");this.getGroupTreeData()}},getGroupTreeData:function(){var e=this;this.axios.get("/api-admin/cloud-store-group",{params:{requestProject:"middle-ground"}}).then(function(t){var s=t.data;0==s.errorCode?e.dataObj=s.result:e.$message.error(s.message)})},getSearchData:function(e){var t=this;e&&this.axios.post("/api-admin/cloud-store",r.stringify({requestProject:"middle-ground",search:this.searchValueList,currentPage:1,pageSize:5,selectedIds:this.selectListId.join(",")})).then(function(e){var s=e.data;0==s.errorCode?t.selectList=s.result.list?s.result.list:[]:t.$message.error(s.message)})},selectShop:function(e){this.showShopTree=!1,this.showSearchList=!1;var t={};t.storeType=parseInt(e),"0"==e?(t.storeGroupIds="",t.storeIds="",this.$emit("sendSelectGroupData",t)):"1"==e?(this.sendGroupObj.storeType=parseInt(e),this.$emit("sendSelectGroupData",this.sendGroupObj)):"2"==e&&(this.sendStoreObj.storeType=parseInt(e),this.$emit("sendSelectGroupData",this.sendStoreObj))},toggleShopTree:function(){this.showShopTree=!this.showShopTree},groupBtnSure:function(){this.showShopTree=!1;var e=this.$refs.shopGroupTree.getCheckedKeys(),t=e.length,s=e.join(","),r=[];e.forEach(function(e){var t={};t.storeGroupId=e,t.storeId=null,r.push(t)}),this.shopGroupValue="已选择"+t+"个门店分组",this.sendGroupObj={},this.sendGroupObj.storeGroupIds=s,this.sendGroupObj.storeIds="",this.sendGroupObj.storeType=parseInt(this.value),this.sendGroupObj.storeList=r,this.$emit("sendSelectGroupData",this.sendGroupObj)},toggleSearchShop:function(){this.showSearchList=!this.showSearchList},showSearchTree:function(){this.showSearchList=!0},hideSearch:function(){this.showSearchList=!1},hideTree:function(){this.showShopTree=!1,this.showSearchList=!1},selectShopSuccess:function(e,t){this.selecData2.push(e),this.selecDataName.push(e.storeName),this.selectList.splice(t,1),this.selectListId.push(e.storeId),this.selectListGroupId.push(e.storeGroupId);var s=[];this.selecData2.forEach(function(e){var t={};t.storeGroupId=e.storeGroupId,t.storeId=e.storeId,s.push(t)}),this.sendStoreObj={},this.sendStoreObj.storeType=parseInt(this.value),this.sendStoreObj.storeGroupIds=this.selectListGroupId.join(","),this.sendStoreObj.storeIds=this.selectListId.join(","),this.sendStoreObj.storeList=s,this.$emit("sendSelectGroupData",this.sendStoreObj)},removeData:function(e){this.selecData2.splice(e,1),this.selecDataName.splice(e,1),this.selectListId.splice(e,1),this.selectListGroupId.splice(e,1);var t=[];this.selecData2.forEach(function(e){var s={};s.storeGroupId=e.storeGroupId,s.storeId=e.storeId,t.push(s)}),this.sendStoreObj={},this.sendStoreObj.storeType=parseInt(this.value),this.sendStoreObj.storeGroupIds=this.selectListGroupId.join(","),this.sendStoreObj.storeIds=this.selectListId.join(","),this.sendStoreObj.storeList=t,this.$emit("sendSelectGroupData",this.sendStoreObj)}}},a={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"select-shop-wrap"},[s("el-select",{staticClass:"select-shop fl",attrs:{placeholder:"请选择"},on:{change:e.selectShop},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"1"==e.value,expression:"value == '1'"}],staticClass:"all-style-wrap fl"},[s("el-popover",{staticClass:"vertical-baseline",attrs:{"popper-class":"store-group-wrap",placement:"bottom-start",trigger:"click"},model:{value:e.showShopTree,callback:function(t){e.showShopTree=t},expression:"showShopTree"}},[s("div",{staticClass:"select-shop select-shop-rt",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.shopGroupValue))]),e._v(" "),s("div",{staticClass:"select-shop-url-wrap",class:{"group-top-318":e.groupTopBool}},[s("div",{staticClass:"shop-tree-wrap"},[s("el-tree",{ref:"shopGroupTree",attrs:{data:e.dataObj,"show-checkbox":"","default-expand-all":"","default-checked-keys":e.keysArr,"node-key":"storeGroupId","highlight-current":"",props:e.defaultProps}})],1),e._v(" "),s("div",{staticClass:"select-group-btn"},[s("el-row",[s("el-button",{staticStyle:{color:"#303133"},attrs:{type:"text",size:"small"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.hideTree(t)}}},[e._v("取消")]),e._v(" "),s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.groupBtnSure(t)}}},[e._v("确定")])],1)],1)])])],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"2"==e.value,expression:"value == '2'"}],staticClass:"all-style-wrap fl"},[s("el-popover",{staticClass:"vertical-baseline",attrs:{placement:"bottom-start",trigger:"click"},model:{value:e.showSearchList,callback:function(t){e.showSearchList=t},expression:"showSearchList"}},[s("div",{staticClass:"select-shop el-input dm-store__reference select-shop-total",attrs:{slot:"reference"},slot:"reference"},[s("div",{staticClass:"select-shop-selected"},e._l(e.selecDataName,function(t,r){return s("el-tag",{key:r,attrs:{size:"small",closable:""},on:{close:function(t){return e.removeData(r)}}},[e._v(e._s(t))])}),1),e._v(" "),s("el-popover",{attrs:{placement:"top-start","popper-class":"select-shop__popper",width:"300",trigger:"hover"}},[e._l(e.selecDataName,function(t,r){return s("el-tag",{key:r,staticClass:"dm-store__total--tag",attrs:{size:"small",closable:""},on:{close:function(t){return e.removeData(r)}}},[e._v(e._s(t))])}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.selecDataName.length,expression:"selecDataName.length"}],staticClass:"total-tip",attrs:{slot:"reference"},slot:"reference"},[e._v("共"+e._s(e.selecDataName.length)+"项")])],2)],1),e._v(" "),s("div",{staticClass:"select-shop-url-wrap search-shop-wrap"},[s("div",{staticClass:"search-shop-input"},[s("el-input",{staticClass:"input-name",attrs:{"prefix-icon":"el-icon-search",size:"small",clearable:"",placeholder:"输入搜索内容"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getSearchData(e.searchValueList)}},model:{value:e.searchValueList,callback:function(t){e.searchValueList=t},expression:"searchValueList"}})],1),e._v(" "),s("div",{staticClass:"search-shop-list"},[e.selectList.length>0?s("ul",e._l(e.selectList,function(t,r){return s("li",{key:r,on:{click:function(s){return s.preventDefault(),s.stopPropagation(),e.selectShopSuccess(t,r)}}},[s("span",[e._v(e._s(t.storeName))])])}),0):s("p",{staticClass:"no-data"},[e._v("无搜索内容")]),e._v(" "),s("p",{staticClass:"search-list-tip"},[e._v("最多显示5条数据")])])])])],1),e._v(" "),s("p",{staticClass:"wxy-tip"},[e._v("按观云台门店分组，应用于万象仪")])],1)},staticRenderFns:[]};var i=s("C7Lr")(o,a,!1,function(e){s("BZf+")},"data-v-1bc54eea",null);t.a=i.exports},wS9C:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s("ZmIX"),o=s("9Xge"),a=s("qopJ"),i=s("08dp"),l=s("+PzL"),n=s("0xDb"),c=function(e,t,s){t?Object(i.b)(t)?s():s(new Error("请输入正确的11位手机号码")):s(new Error("请输入手机号码"))},h=function(e,t,s){t?Object(i.a)(t)?s():s(new Error("员工代码不能有特殊字符")):s(new Error("请输入员工代码"))},u={name:"index",data:function(){return{repProjectName:"middle-ground",navpath:[{name:"用户管理",path:"/userManage"}],navpathName:"新建用户",ruleForm:{name:"",sex:1,code:"",phone:"",role:"",paw:"",store:""},rules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}],code:[{required:!0,trigger:"blur",validator:h}],phone:[{required:!0,trigger:"blur",validator:c}],role:[{required:!0,message:"请输入职位",trigger:"blur"}],paw:[{required:!0,message:"请输入登录密码",trigger:"blur"}]},sendChildData:{},storeType:"0",storeList:[],errorStoreMsg:"",errorStoreBool:!1,sendChildData2:{},storeType2:"0",storeList2:[],errorRightMsg:"",errorRightBool:!1,dialogVisible:!1,clerkId:"",inputNum1:0,inputLength1:10,inputNum2:0,inputLength2:20,inputNum3:0,inputLength3:20}},computed:{},methods:{getSelectGroupData:function(e){this.storeType=e.storeType.toString(),this.storeList=e.storeList?e.storeList:[],this.storeList.length>0&&(this.errorStoreBool=!1),"0"==this.storeType&&(this.errorStoreBool=!1)},getSelectGroupData2:function(e){this.storeType2=e.storeType.toString(),this.storeList2=e.storeList?e.storeList:[],this.storeList2.length>0&&(this.errorRightBool=!1),"0"==this.storeType2&&(this.errorRightBool=!1)},toInput1:function(e,t){this.ruleForm.name=l.a.getByteVal(t.target.value,this.inputLength1),this.inputNum1=l.a.getZhLen(this.ruleForm.name)},toInput2:function(e,t){this.ruleForm.code&&(this.ruleForm.code=l.a.getByteVal(t.target.value,this.inputLength2),this.inputNum2=l.a.getZhLen(this.ruleForm.code))},toInput3:function(e,t){this.ruleForm.role=l.a.getByteVal(t.target.value,this.inputLength3),this.inputNum3=l.a.getZhLen(this.ruleForm.role)},saveUserBtn:function(e){var t=this,s=!0;"1"==this.storeType?this.storeList.length<1&&(this.errorStoreBool=!0,this.errorStoreMsg="请选择门店分组",s=!1):"2"==this.storeType&&this.storeList.length<1&&(this.errorStoreBool=!0,this.errorStoreMsg="请选择部分门店",s=!1),"1"==this.storeType2?this.storeList2.length<1&&(this.errorRightBool=!0,this.errorRightMsg="请选择门店分组",s=!1):"2"==this.storeType2&&this.storeList2.length<1&&(this.errorRightBool=!0,this.errorRightMsg="请选择部分门店",s=!1),this.$refs[e].validate(function(e){if(!e||!s)return Object(n.a)("error submit!!"),!1;t.axios.post("/api-admin/save-clerk-info?requestProject=gic-web",{clerkId:"",clerkType:2,clerkName:t.ruleForm.name,clerkGender:t.ruleForm.sex,clerkCode:t.ruleForm.code,phoneNumber:t.ruleForm.phone,positionName:t.ruleForm.role,storeMode:t.storeType,storeList:t.storeList,cloudStoreMode:t.storeType2,cloudStoreList:t.storeList2,resetPwd:t.ruleForm.paw},{headers:{"Content-Type":"application/json"}}).then(function(e){var s=e.data;0==s.errorCode?(t.dialogVisible=!0,t.clerkId=s.result):t.$message.error(s.message)})})},cancelBtn:function(){this.dialogVisible=!1,this.$router.push("/userManage")},addThreeCount:function(){this.$router.push({path:"/threeApply",query:{type:"add",name:this.ruleForm.name,clerkId:this.clerkId}})}},components:{breadCrumb:r.a,selectShopTree:o.a,selectRightTree:a.a}},p={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"index-content"},[r("bread-crumb",{attrs:{navpath:e.navpath,navpathName:e.navpathName}}),e._v(" "),r("div",{staticClass:"content-content-wrap"},[r("div",{staticClass:"content-content"},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"姓名：",prop:"name"}},[r("div",{staticClass:"edit-input"},[r("el-input",{staticClass:"input-input",nativeOn:{keyup:function(t){return e.toInput1(e.ruleForm.name,t)}},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}}),e._v(" "),r("span",{staticClass:"tag-name-num"},[e._v(e._s(e.inputNum1)+"/"+e._s(e.inputLength1))])],1)]),e._v(" "),r("el-form-item",{attrs:{label:"性别："}},[r("el-radio-group",{model:{value:e.ruleForm.sex,callback:function(t){e.$set(e.ruleForm,"sex",t)},expression:"ruleForm.sex"}},[r("el-radio",{attrs:{label:1}},[e._v("男")]),e._v(" "),r("el-radio",{attrs:{label:2}},[e._v("女")])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"员工代码：",prop:"code"}},[r("div",{staticClass:"edit-input"},[r("el-input",{staticClass:"input-input",nativeOn:{keyup:function(t){return e.toInput2(e.ruleForm.code,t)}},model:{value:e.ruleForm.code,callback:function(t){e.$set(e.ruleForm,"code",t)},expression:"ruleForm.code"}}),e._v(" "),r("span",{staticClass:"tag-name-num"},[e._v(e._s(e.inputNum2)+"/"+e._s(e.inputLength2))])],1)]),e._v(" "),r("el-form-item",{attrs:{label:"手机号码：",prop:"phone"}},[r("el-input",{model:{value:e.ruleForm.phone,callback:function(t){e.$set(e.ruleForm,"phone",t)},expression:"ruleForm.phone"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"职位：",prop:"role"}},[r("div",{staticClass:"edit-input"},[r("el-input",{staticClass:"input-input",nativeOn:{keyup:function(t){return e.toInput3(e.ruleForm.role,t)}},model:{value:e.ruleForm.role,callback:function(t){e.$set(e.ruleForm,"role",t)},expression:"ruleForm.role"}}),e._v(" "),r("span",{staticClass:"tag-name-num"},[e._v(e._s(e.inputNum3)+"/"+e._s(e.inputLength3))])],1)]),e._v(" "),r("el-form-item",{attrs:{label:"登录密码：",prop:"paw"}},[r("el-input",{model:{value:e.ruleForm.paw,callback:function(t){e.$set(e.ruleForm,"paw",t)},expression:"ruleForm.paw"}})],1),e._v(" "),r("el-form-item",{staticClass:"is-required store-wrap",attrs:{label:"管辖门店：",prop:"store"}},[r("selectShopTree",{ref:"selectStoreTree",attrs:{msg:e.sendChildData},on:{sendSelectGroupData:e.getSelectGroupData}}),e._v(" "),e.errorStoreBool?r("div",{staticClass:"el-form-item__error"},[e._v(e._s(e.errorStoreMsg))]):e._e()],1),e._v(" "),r("el-form-item",{staticClass:"store-wrap",attrs:{label:"数据权限："}},[r("selectRightTree",{ref:"selectRightDataTree",attrs:{msg:e.sendChildData2},on:{sendSelectGroupData:e.getSelectGroupData2}}),e._v(" "),e.errorRightBool?r("div",{staticClass:"el-form-item__error"},[e._v(e._s(e.errorRightMsg))]):e._e()],1),e._v(" "),r("el-form-item",[r("el-button",{staticClass:"save-btn",attrs:{type:"primary"},on:{click:function(t){return e.saveUserBtn("ruleForm")}}},[e._v("新 建")])],1)],1)],1)]),e._v(" "),r("el-dialog",{staticClass:"dialog-save-wrap",attrs:{title:"提示","close-on-click-modal":!1,visible:e.dialogVisible,width:"480px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("div",[r("div",{staticClass:"img"},[r("img",{attrs:{src:s("K93f"),alt:""}})]),e._v(" "),r("p",[e._v("恭喜，用户创建成功")])]),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.cancelBtn}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.addThreeCount}},[e._v("新增第三方应用账号")])],1)])],1)},staticRenderFns:[]};var d=s("C7Lr")(u,p,!1,function(e){s("mw/H")},"data-v-6af4fd59",null);t.default=d.exports}});