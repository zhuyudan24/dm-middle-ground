webpackJsonp([2],{"6UY/":function(e,t){},AA3o:function(e,t,i){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},HA2g:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("ZmIX"),o=i("+PzL"),r=i("bR3F"),a=i("P9l9"),s=i("0xDb"),d={name:"index",data:function(){return{defaultProps:{children:"childList",label:"rightName"},navpath:[{name:"用户管理",path:"/userManage"}],navpathName:"新建角色",navpathNameedit:"编辑角色",naveditBool:!1,ruleForm:{name:"",next:""},rules:{name:[{required:!0,message:"请输入角色名称",trigger:"blur"}]},options2:[],options3:[],apply:"gic",store:"",storeName:"",inputNum:0,inputLength:20,treeData:[],treeData1:[],treeData2:[],treeData3:[],ids:[],ids1:[],withoutParents1:[],selectBtnIds1:[],ids2:[],withoutParents2:[],selectBtnIds2:[],ids3:[],withoutParents3:[],selectBtnIds3:[],treeOptions:{withParents:!1},gicWebObj:{},rightArr:[],btnArr:[],roleId:"",loading:!1,allBtnArr:[]}},computed:{},mounted:function(){this.getUrlData()},methods:{getUrlData:function(){this.getThreeApply(),this.roleId=this.$route.query.roleId?this.$route.query.roleId:"";var e=this.$route.query.type;this.navpath[0].path="/userManage?type="+e,this.roleId?(this.naveditBool=!0,this.getRoleDetail()):this.getGicRight()},getRoleDetail:function(){var e=this;Object(a.b)("/api-admin/middle-role-detail",{roleId:this.roleId}).then(function(t){var i=t.data;if(0==i.errorCode){var n=i.result.role;if(e.ruleForm.name=n.roleName,e.apply=n.projectCode,e.inputNum=o.a.getZhLen(e.ruleForm.name),"gic"==e.apply)e.treeData1=i.result.rightList,e.treeData1.forEach(function(t,i){t.fold=!1,t.childList=t.childList?t.childList:[],t.childList.forEach(function(e,t){e.childList=e.childList?e.childList:[],e.childList.length>0&&(e.foldBool=1)}),"gic-web"==t.rightId&&(e.treeData1.splice(i,1),e.gicWebObj={},e.gicWebObj.rightId=t.rightId,e.gicWebObj.rightCode=t.rightCode,e.gicWebObj.rightType=t.rightType)}),e.getRightIds(e.treeData1).forEach(function(t){e.withoutParents1.push(t)});else if("wm-mall"==e.apply){e.storeName=n.thirdProjectStoreName,e.getWeiStore(),e.$nextTick(function(t){e.store=Number(n.thirdProjectStoreId)});var r=i.result.rightList;r.forEach(function(e,t){e.fold=!1,e.childList=e.childList?e.childList:[],e.childList.forEach(function(e,t){e.childList=e.childList?e.childList:[],e.childList.length>0&&(e.foldBool=1)})}),e.treeData2=e.getWeiBtnRight(r),e.getRightIds(e.treeData2).forEach(function(t){e.withoutParents2.push(t)})}else if("yh-bi"==e.apply){e.treeData3=i.result.rightList,e.treeData3.forEach(function(e,t){e.fold=!1,e.childList=e.childList?e.childList:[],e.childList.forEach(function(e,t){e.childList=e.childList?e.childList:[],e.childList.length>0&&(e.foldBool=1)})}),e.getRightIds(e.treeData3).forEach(function(t){e.withoutParents3.push(t)})}}else e.$message.error(i.message)}).catch(function(e){Object(s.a)(e)})},changeApply:function(e){"gic"==e?this.getGicRight(e):"wm-mall"==e?this.getWeiStore():"yh-bi"==e&&this.getYhRight(e)},getWeiStore:function(){var e=this;Object(a.a)("/api-admin/list-wm-store",{}).then(function(t){var i=t.data;0==i.errorCode?(e.options3=i.result?i.result:[],e.store?e.roleId||e.getWeiRight():e.options3.length>0&&e.$nextTick(function(t){e.store=e.options3[0].wmStoreId;var i;i=e.options3.find(function(t){return t.wmStoreId===e.store}),e.storeName=i.name,e.getWeiRight()})):e.$message.error(i.message)}).catch(function(e){Object(s.a)(e),this.$message.error(e.message)})},getThreeApply:function(){var e=this;Object(a.b)("/api-admin/list-all-project",{}).then(function(t){var i=t.data;if(0==i.errorCode){e.options2.push({thirdProjectId:0,code:"gic",name:"GIC商户后台"}),i.result.forEach(function(t){"yueshi"!=t.code&&e.options2.push(t)})}else e.$message.error(i.message)}).catch(function(e){Object(s.a)(e),this.$message.error(e.message)})},changeWeiStore:function(e){var t;t=this.options3.find(function(t){return t.wmStoreId===e}),this.storeName=t.name,this.getWeiRight()},getGicRight:function(e){this.loading=!0,this.ids1.splice(0,this.ids1.length),this.withoutParents1.splice(0,this.withoutParents1.length),this.getOtherRight(e)},getWeiRight:function(){var e=this;this.loading=!0,this.ids2.splice(0,this.ids2.length),this.withoutParents2.splice(0,this.withoutParents2.length),Object(a.b)("/api-admin/get-third-project-role-right",{projectCode:this.apply,roleId:this.roleId,thirdProjectStoreId:this.store}).then(function(t){var i=t.data;if(e.loading=!1,0==i.errorCode){var n=i.result;n.forEach(function(e,t){e.fold=!1,e.childList=e.childList?e.childList:[],e.childList.forEach(function(e,t){e.childList=e.childList?e.childList:[],e.childList.length>0&&(e.foldBool=1)})}),e.treeData2=e.getWeiBtnRight(n)}else e.$message.error(i.message)}).catch(function(e){Object(s.a)(e)})},getYhRight:function(e){this.loading=!0,this.ids3.splice(0,this.ids3.length),this.withoutParents3.splice(0,this.withoutParents3.length),this.getOtherRight(e)},getOtherRight:function(e){var t=this;Object(a.b)("/api-admin/get-gic-role-right",{roleId:this.roleId,projectCode:e}).then(function(i){var n=i.data;if(t.loading=!1,0==n.errorCode){var o=n.result.rightList?n.result.rightList:[];o.forEach(function(e,t){e.fold=!1,e.childList=e.childList?e.childList:[],e.childList.forEach(function(e,t){e.childList=e.childList?e.childList:[],e.childList.length>0&&(e.foldBool=1)})}),"yh-bi"==e?t.treeData3=o:(t.treeData1=o,t.treeData1.forEach(function(e,i){"gic-web"==e.rightId&&(t.treeData1.splice(i,1),t.gicWebObj={},t.gicWebObj.rightId=e.rightId,t.gicWebObj.rightCode=e.rightCode,t.gicWebObj.rightType=e.rightType)}))}else t.$message.error(n.message)}).catch(function(e){Object(s.a)(e)})},getWeiBtnRight:function(e){var t=this;return e.forEach(function(e){e.childList=e.childList?e.childList:[],e.buttonList&&e.buttonList.forEach(function(t){t.btn=1,e.childList.unshift(t)}),e.childList&&t.getWeiBtnRight(e.childList)}),e},toInput:function(e,t){this.ruleForm.name=o.a.getByteVal(t.target.value,this.inputLength),this.inputNum=o.a.getZhLen(this.ruleForm.name)},getRightObj:function(e,t){var i=this;return t.forEach(function(n){e.forEach(function(e){if(n==e.rightId){var o={};o.rightId=e.rightId,o.rightCode=e.rightCode,o.rightType=e.rightType,i.rightArr.push(o),e.childList&&i.getRightObj(e.childList,t)}})}),this.rightArr},getRightIds:function(e){var t=this;return e.forEach(function(e){e.childList=e.childList?e.childList:[],1==e.hasRight&&(e.childList.length<1&&t.ids.push(e.rightId),e.childList&&t.getRightIds(e.childList))}),this.ids},saveBtn:function(e){var t=this;this.ruleForm.name||this.$message.error("请输入角色名称"),this.$refs[e].validate(function(e){if(!e)return Object(s.a)("error submit!!"),!1;var i=[];if("gic"==t.apply)t.ids1=t.$refs.tree1.getCheckedKeys().concat(t.$refs.tree1.getHalfCheckedKeys()),(i=t.getRightObj(t.treeData1,t.ids1)).length>0&&i.push(t.gicWebObj);else if("wm-mall"==t.apply){if(t.ids2=t.$refs.tree2.getCheckedKeys().concat(t.$refs.tree2.getHalfCheckedKeys()),(i=t.getRightObj(t.treeData2,t.ids2)).length<1)return void t.$message.error("请选择权限")}else if("yh-bi"==t.apply&&(t.ids3=t.$refs.tree3.getCheckedKeys().concat(t.$refs.tree3.getHalfCheckedKeys()),(i=t.getRightObj(t.treeData3,t.ids3)).length<1))return void t.$message.error("请选择权限");for(var n=[],o={},r=0;r<i.length;r++)o[i[r].rightId]||(n.push(i[r]),o[i[r].rightId]=!0);t.axios.post("/api-admin/save-middle-role?requestProject=gic-web",{roleId:t.roleId,roleName:t.ruleForm.name,roleType:"3",lowRoleId:"",rightList:n,projectCode:t.apply,thirdProjectStoreId:t.store,thirdProjectStoreName:t.storeName},{headers:{"Content-Type":"application/json"}}).then(function(e){var i=e.data;0==i.errorCode?(t.$message.success("保存成功"),t.$router.push("/userManage")):t.$message.error(i.message)}).catch(function(e){Object(s.a)(e)})})}},components:{breadCrumb:n.a,elNewTree:r.a}},l={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"index-content"},[i("bread-crumb",{attrs:{navpath:e.navpath,navpathName:e.naveditBool?e.navpathNameedit:e.navpathName}}),e._v(" "),i("div",{staticClass:"content-content-wrap"},[i("div",{staticClass:"content-content"},[i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"角色名称：",prop:"name"}},[i("div",{staticClass:"edit-input"},[i("el-input",{nativeOn:{keyup:function(t){return e.toInput(e.ruleForm.name,t)}},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}}),e._v(" "),i("span",{staticClass:"tag-name-num"},[e._v(e._s(e.inputNum)+"/"+e._s(e.inputLength))])],1)])],1),e._v(" "),i("div",{staticClass:"right-config"},[i("div",{staticClass:"title clearfix"},[i("p",{staticClass:"fl"},[e._v("权限设置")]),e._v(" "),i("div",{staticClass:"select-right fr"},[e._v("\n            选择应用："),i("el-select",{attrs:{disabled:!!e.roleId,placeholder:"请选择"},on:{change:e.changeApply},model:{value:e.apply,callback:function(t){e.apply=t},expression:"apply"}},e._l(e.options2,function(e){return i("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}),1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"wm-mall"==e.apply,expression:"apply == 'wm-mall'"}],staticStyle:{"margin-left":"10px",display:"inline-block"}},[i("el-select",{attrs:{disabled:!!e.roleId,placeholder:"请选择"},on:{change:e.changeWeiStore},model:{value:e.store,callback:function(t){e.store=t},expression:"store"}},e._l(e.options3,function(e){return i("el-option",{key:e.wmStoreId,attrs:{label:e.name,value:e.wmStoreId}})}),1)],1)],1)]),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"right-wrap account-limit-wrap"},["gic"==e.apply?i("elNewTree",{ref:"tree1",attrs:{data:e.treeData1,"show-checkbox":"","node-key":"rightId","default-checked-keys":e.withoutParents1,"default-expand-all":"",props:e.defaultProps}}):e._e(),e._v(" "),"wm-mall"==e.apply?i("elNewTree",{ref:"tree2",attrs:{data:e.treeData2,"show-checkbox":"","node-key":"rightId","default-checked-keys":e.withoutParents2,"default-expand-all":"",props:e.defaultProps}}):e._e(),e._v(" "),"yh-bi"==e.apply?i("elNewTree",{ref:"tree3",attrs:{data:e.treeData3,"show-checkbox":"","node-key":"rightId","default-checked-keys":e.withoutParents3,"default-expand-all":"",props:e.defaultProps}}):e._e()],1)])],1)]),e._v(" "),i("div",{staticClass:"save-btn"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveBtn("ruleForm")}}},[e._v(e._s(e.roleId?"保 存":"新 建"))])],1)],1)},staticRenderFns:[]};var h=i("C7Lr")(d,l,!1,function(e){i("S7w6")},"data-v-be3f6174",null);t.default=h.exports},IHur:function(e,t,i){var n=i("A2+p"),o=i("H5bT");i("Y2FG")("keys",function(){return function(e){return o(n(e))}})},IYkF:function(e,t,i){e.exports={default:i("KIjQ"),__esModule:!0}},KIjQ:function(e,t,i){i("W/pk");var n=i("/KQr").Object;e.exports=function(e,t){return n.create(e,t)}},S7w6:function(e,t){},"W/pk":function(e,t,i){var n=i("2AZ7");n(n.S,"Object",{create:i("+Vp4")})},Y2FG:function(e,t,i){var n=i("2AZ7"),o=i("/KQr"),r=i("D86D");e.exports=function(e,t){var i=(o.Object||{})[e]||Object[e],a={};a[e]=t(i),n(n.S+n.F*r(function(){i(1)}),"Object",a)}},ZLEe:function(e,t,i){e.exports={default:i("m5p0"),__esModule:!0}},bR3F:function(e,t,i){"use strict";var n=i("ZLEe"),o=i.n(n),r=i("IYkF"),a=i.n(r),s=i("hRKE"),d=i.n(s),l=i("AA3o"),h=i.n(l),c=i("xSur"),u=i.n(c),f=function(e){for(let t=1,i=arguments.length;t<i;t++){let i=arguments[t]||{};for(let t in i)if(i.hasOwnProperty(t)){let n=i[t];void 0!==n&&(e[t]=n)}}return e},p=i("liLe"),g=i.n(p),v="$treeNodeId",m=function(e,t){t&&!t[v]&&g()(t,v,{value:e.id,enumerable:!1,configurable:!1,writable:!1})},y=function(e,t){return e?t[e]:t[v]},k=function(e){for(var t=!0,i=!0,n=!0,o=0,r=e.length;o<r;o++){var a=e[o];(!0!==a.checked||a.indeterminate)&&(t=!1,a.disabled||(n=!1)),(!1!==a.checked||a.indeterminate)&&(i=!1)}return{all:t,none:i,allWithoutDisable:n,half:!t&&!i}},b=function e(t){if(0!==t.childNodes.length){var i=k(t.childNodes),n=i.all,o=i.none,r=i.half;n?(t.checked=!0,t.indeterminate=!1):r?(t.checked=!1,t.indeterminate=!0):o&&(t.checked=!1,t.indeterminate=!1);var a=t.parent;a&&0!==a.level&&(t.store.checkStrictly||e(a))}},C=function(e,t){var i=e.store.props,n=e.data||{},o=i[t];if("function"==typeof o)return o(n,e);if("string"==typeof o)return n[o];if(void 0===o){var r=n[t];return void 0===r?"":r}},x=0,N=function(){function e(t){for(var i in h()(this,e),this.id=x++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,t)t.hasOwnProperty(i)&&(this[i]=t[i]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1);var n=this.store;if(!n)throw new Error("[Node]store is required!");n.registerNode(this);var o=n.props;if(o&&void 0!==o.isLeaf){var r=C(this,"isLeaf");"boolean"==typeof r&&(this.isLeafByUser=r)}if(!0!==n.lazy&&this.data?(this.setData(this.data),n.defaultExpandAll&&(this.expanded=!0)):this.level>0&&n.lazy&&n.defaultExpandAll&&this.expand(),Array.isArray(this.data)||m(this,this.data),this.data){var a=n.defaultExpandedKeys,s=n.key;s&&a&&-1!==a.indexOf(this.key)&&this.expand(null,n.autoExpandParent),s&&void 0!==n.currentNodeKey&&this.key===n.currentNodeKey&&(n.currentNode=this),n.lazy&&n._initDefaultCheckedNode(this),this.updateLeafState()}}return u()(e,[{key:"setData",value:function(e){Array.isArray(e)||m(this,e),this.data=e,this.childNodes=[];for(var t=void 0,i=0,n=(t=0===this.level&&this.data instanceof Array?this.data:C(this,"children")||[]).length;i<n;i++)this.insertChild({data:t[i]})}},{key:"contains",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function i(n){for(var o=n.childNodes||[],r=!1,a=0,s=o.length;a<s;a++){var d=o[a];if(d===e||t&&i(d)){r=!0;break}}return r}(this)}},{key:"remove",value:function(){var e=this.parent;e&&e.removeChild(this)}},{key:"insertChild",value:function(t,i,n){if(!t)throw new Error("insertChild error: child is required.");if(!(t instanceof e)){if(!n){var o=this.getChildren(!0);-1===o.indexOf(t.data)&&(void 0===i||i<0?o.push(t.data):o.splice(i,0,t.data))}f(t,{parent:this,store:this.store}),t=new e(t)}t.level=this.level+1,void 0===i||i<0?this.childNodes.push(t):this.childNodes.splice(i,0,t),this.updateLeafState()}},{key:"insertBefore",value:function(e,t){var i=void 0;t&&(i=this.childNodes.indexOf(t)),this.insertChild(e,i)}},{key:"insertAfter",value:function(e,t){var i=void 0;t&&-1!==(i=this.childNodes.indexOf(t))&&(i+=1),this.insertChild(e,i)}},{key:"removeChild",value:function(e){var t=this.getChildren()||[],i=t.indexOf(e.data);i>-1&&t.splice(i,1);var n=this.childNodes.indexOf(e);n>-1&&(this.store&&this.store.deregisterNode(e),e.parent=null,this.childNodes.splice(n,1)),this.updateLeafState()}},{key:"removeChildByData",value:function(e){for(var t=null,i=0;i<this.childNodes.length;i++)if(this.childNodes[i].data===e){t=this.childNodes[i];break}t&&this.removeChild(t)}},{key:"expand",value:function(e,t){var i=this,n=function(){if(t)for(var n=i.parent;n.level>0;)n.expanded=!0,n=n.parent;i.expanded=!0,e&&e()};this.shouldLoadData()?this.loadData(function(e){e instanceof Array&&(i.checked?i.setChecked(!0,!0):i.store.checkStrictly||b(i),n())}):n()}},{key:"doCreateChildren",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.forEach(function(e){t.insertChild(f({data:e},i),void 0,!0)})}},{key:"collapse",value:function(){this.expanded=!1}},{key:"shouldLoadData",value:function(){return!0===this.store.lazy&&this.store.load&&!this.loaded}},{key:"updateLeafState",value:function(){if(!0!==this.store.lazy||!0===this.loaded||void 0===this.isLeafByUser){var e=this.childNodes;!this.store.lazy||!0===this.store.lazy&&!0===this.loaded?this.isLeaf=!e||0===e.length:this.isLeaf=!1}else this.isLeaf=this.isLeafByUser}},{key:"setChecked",value:function(e,t,i,n){var o=this;if(this.indeterminate="half"===e,this.checked=!0===e,!this.store.checkStrictly){if(!this.shouldLoadData()||this.store.checkDescendants){var r=k(this.childNodes),a=r.all,s=r.allWithoutDisable;this.isLeaf||a||!s||(this.checked=!1,e=!1);var d=function(){if(t){for(var i=o.childNodes,r=0,a=i.length;r<a;r++){var s=i[r];n=n||!1!==e;var d=s.disabled?s.checked:n;s.setChecked(d,t,!0,n)}var l=k(i),h=l.half,c=l.all;c||(o.checked=c,o.indeterminate=h)}};if(this.shouldLoadData())return void this.loadData(function(){d(),b(o)},{checked:!1!==e});d()}var l=this.parent;l&&0!==l.level&&(i||b(l))}}},{key:"getChildren",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(0===this.level)return this.data;var t=this.data;if(!t)return null;var i=this.store.props,n="children";return i&&(n=i.children||"children"),void 0===t[n]&&(t[n]=null),e&&!t[n]&&(t[n]=[]),t[n]}},{key:"updateChildren",value:function(){var e=this,t=this.getChildren()||[],i=this.childNodes.map(function(e){return e.data}),n={},o=[];t.forEach(function(e,t){e[v]?n[e[v]]={index:t,data:e}:o.push({index:t,data:e})}),this.store.lazy||i.forEach(function(t){n[t[v]]||e.removeChildByData(t)}),o.forEach(function(t){var i=t.index,n=t.data;e.insertChild({data:n},i)}),this.updateLeafState()}},{key:"loadData",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!0!==this.store.lazy||!this.store.load||this.loaded||this.loading&&!o()(i).length)e&&e.call(this);else{this.loading=!0;this.store.load(this,function(n){t.loaded=!0,t.loading=!1,t.childNodes=[],t.doCreateChildren(n,i),t.updateLeafState(),b(t),e&&e.call(t,n)})}}},{key:"label",get:function(){return C(this,"label")}},{key:"key",get:function(){var e=this.store.key;return this.data?this.data[e]:null}},{key:"disabled",get:function(){return C(this,"disabled")}},{key:"nextSibling",get:function(){var e=this.parent;if(e){var t=e.childNodes.indexOf(this);if(t>-1)return e.childNodes[t+1]}return null}},{key:"previousSibling",get:function(){var e=this.parent;if(e){var t=e.childNodes.indexOf(this);if(t>-1)return t>0?e.childNodes[t-1]:null}return null}}]),e}(),w=function(){function e(t){var i=this;for(var n in h()(this,e),this.currentNode=null,this.currentNodeKey=null,t)t.hasOwnProperty(n)&&(this[n]=t[n]);(this.nodesMap={},this.root=new N({data:this.data,store:this}),this.lazy&&this.load)?(0,this.load)(this.root,function(e){i.root.doCreateChildren(e),i._initDefaultCheckedNodes()}):this._initDefaultCheckedNodes()}return u()(e,[{key:"filter",value:function(e){var t=this.filterNodeMethod,i=this.lazy;!function n(o){var r=o.root?o.root.childNodes:o.childNodes;if(r.forEach(function(i){i.visible=t.call(i,e,i.data,i),n(i)}),!o.visible&&r.length){var a=!0;r.forEach(function(e){e.visible&&(a=!1)}),o.root?o.root.visible=!1===a:o.visible=!1===a}e&&(!o.visible||o.isLeaf||i||o.expand())}(this)}},{key:"setData",value:function(e){e!==this.root.data?(this.root.setData(e),this._initDefaultCheckedNodes()):this.root.updateChildren()}},{key:"getNode",value:function(e){if(e instanceof N)return e;var t="object"!==(void 0===e?"undefined":d()(e))?e:y(this.key,e);return this.nodesMap[t]||null}},{key:"insertBefore",value:function(e,t){var i=this.getNode(t);i.parent.insertBefore({data:e},i)}},{key:"insertAfter",value:function(e,t){var i=this.getNode(t);i.parent.insertAfter({data:e},i)}},{key:"remove",value:function(e){var t=this.getNode(e);t&&t.parent&&t.parent.removeChild(t)}},{key:"append",value:function(e,t){var i=t?this.getNode(t):this.root;i&&i.insertChild({data:e})}},{key:"_initDefaultCheckedNodes",value:function(){var e=this,t=this.defaultCheckedKeys||[],i=this.nodesMap;t.forEach(function(t){var n=i[t];n&&n.setChecked(!0,!e.checkStrictly)})}},{key:"_initDefaultCheckedNode",value:function(e){-1!==(this.defaultCheckedKeys||[]).indexOf(e.key)&&e.setChecked(!0,!this.checkStrictly)}},{key:"setDefaultCheckedKey",value:function(e){e!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=e,this._initDefaultCheckedNodes())}},{key:"registerNode",value:function(e){this.key&&e&&e.data&&(void 0!==e.key&&(this.nodesMap[e.key]=e))}},{key:"deregisterNode",value:function(e){var t=this;this.key&&e&&e.data&&(e.childNodes.forEach(function(e){t.deregisterNode(e)}),delete this.nodesMap[e.key])}},{key:"getCheckedNodes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=[];return function n(o){(o.root?o.root.childNodes:o.childNodes).forEach(function(o){(o.checked||t&&o.indeterminate)&&(!e||e&&o.isLeaf)&&i.push(o.data),n(o)})}(this),i}},{key:"getCheckedKeys",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.getCheckedNodes(t).map(function(t){return(t||{})[e.key]})}},{key:"getHalfCheckedNodes",value:function(){var e=[];return function t(i){(i.root?i.root.childNodes:i.childNodes).forEach(function(i){i.indeterminate&&e.push(i.data),t(i)})}(this),e}},{key:"getHalfCheckedKeys",value:function(){var e=this;return this.getHalfCheckedNodes().map(function(t){return(t||{})[e.key]})}},{key:"_getAllNodes",value:function(){var e=[],t=this.nodesMap;for(var i in t)t.hasOwnProperty(i)&&e.push(t[i]);return e}},{key:"updateChildren",value:function(e,t){var i=this.nodesMap[e];if(i){for(var n=i.childNodes,o=n.length-1;o>=0;o--){var r=n[o];this.remove(r.data)}for(var a=0,s=t.length;a<s;a++){var d=t[a];this.append(d,i.data)}}}},{key:"_setCheckedKeys",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments[2],n=this._getAllNodes().sort(function(e,t){return t.level-e.level}),r=a()(null),s=o()(i);n.forEach(function(e){return e.setChecked(!1,!1)});for(var d=0,l=n.length;d<l;d++){var h=n[d],c=h.data[e].toString();if(s.indexOf(c)>-1){for(var u=h.parent;u&&u.level>0;)r[u.data[e]]=!0,u=u.parent;h.isLeaf||this.checkStrictly?h.setChecked(!0,!1):(h.setChecked(!0,!0),t&&function(){h.setChecked(!1,!1);!function e(t){t.childNodes.forEach(function(t){t.isLeaf||t.setChecked(!1,!1),e(t)})}(h)}())}else h.checked&&!r[c]&&h.setChecked(!1,!1)}}},{key:"setCheckedNodes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.key,n={};e.forEach(function(e){n[(e||{})[i]]=!0}),this._setCheckedKeys(i,t,n)}},{key:"setCheckedKeys",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.defaultCheckedKeys=e;var i=this.key,n={};e.forEach(function(e){n[e]=!0}),this._setCheckedKeys(i,t,n)}},{key:"setDefaultExpandedKeys",value:function(e){var t=this;e=e||[],this.defaultExpandedKeys=e,e.forEach(function(e){var i=t.getNode(e);i&&i.expand(null,t.autoExpandParent)})}},{key:"setChecked",value:function(e,t,i){var n=this.getNode(e);n&&n.setChecked(!!t,i)}},{key:"getCurrentNode",value:function(){return this.currentNode}},{key:"setCurrentNode",value:function(e){this.currentNode=e}},{key:"setUserCurrentNode",value:function(e){var t=e[this.key],i=this.nodesMap[t];this.setCurrentNode(i)}},{key:"setCurrentNodeKey",value:function(e){if(null!==e){var t=this.getNode(e);t&&(this.currentNode=t)}else this.currentNode=null}}]),e}(),L=i("xd7I");const _=L.default.prototype.$isServer,E=(_||Number(document.documentMode),function(e){return(e||"").replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")});!_&&document.addEventListener,!_&&document.removeEventListener;function D(e,t){if(!e||!t)return!1;if(-1!==t.indexOf(" "))throw new Error("className should not contain space.");return e.classList?e.classList.contains(t):(" "+e.className+" ").indexOf(" "+t+" ")>-1}function $(e,t){if(e){for(var i=e.className,n=(t||"").split(" "),o=0,r=n.length;o<r;o++){var a=n[o];a&&(e.classList?e.classList.add(a):D(e,a)||(i+=" "+a))}e.classList||(e.className=i)}}function I(e,t){if(e&&t){for(var i=t.split(" "),n=" "+e.className+" ",o=0,r=i.length;o<r;o++){var a=i[o];a&&(e.classList?e.classList.remove(a):D(e,a)&&(n=n.replace(" "+a+" "," ")))}e.classList||(e.className=E(n))}}var S={name:"ElCollapseTransition",functional:!0,render:(e,{children:t})=>e("transition",{on:new class{beforeEnter(e){$(e,"collapse-transition"),e.dataset||(e.dataset={}),e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.style.height="0",e.style.paddingTop=0,e.style.paddingBottom=0}enter(e){e.dataset.oldOverflow=e.style.overflow,0!==e.scrollHeight?(e.style.height=e.scrollHeight+"px",e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom):(e.style.height="",e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom),e.style.overflow="hidden"}afterEnter(e){I(e,"collapse-transition"),e.style.height="",e.style.overflow=e.dataset.oldOverflow}beforeLeave(e){e.dataset||(e.dataset={}),e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.dataset.oldOverflow=e.style.overflow,e.style.height=e.scrollHeight+"px",e.style.overflow="hidden"}leave(e){0!==e.scrollHeight&&($(e,"collapse-transition"),e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0)}afterLeave(e){I(e,"collapse-transition"),e.style.height="",e.style.overflow=e.dataset.oldOverflow,e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom}}},t)};var K={methods:{dispatch(e,t,i){for(var n=this.$parent||this.$root,o=n.$options.componentName;n&&(!o||o!==e);)(n=n.$parent)&&(o=n.$options.componentName);n&&n.$emit.apply(n,[t].concat(i))},broadcast(e,t,i){(function e(t,i,n){this.$children.forEach(o=>{o.$options.componentName===t?o.$emit.apply(o,[i].concat(n)):e.apply(o,[t,i].concat([n]))})}).call(this,e,t,i)}}},O={name:"ElCheckbox",mixins:[K],inject:{elForm:{default:""},elFormItem:{default:""}},componentName:"ElCheckbox",data:function(){return{selfModel:!1,focus:!1,isLimitExceeded:!1}},computed:{model:{get:function(){return this.isGroup?this.store:void 0!==this.value?this.value:this.selfModel},set:function(e){this.isGroup?(this.isLimitExceeded=!1,void 0!==this._checkboxGroup.min&&e.length<this._checkboxGroup.min&&(this.isLimitExceeded=!0),void 0!==this._checkboxGroup.max&&e.length>this._checkboxGroup.max&&(this.isLimitExceeded=!0),!1===this.isLimitExceeded&&this.dispatch("ElCheckboxGroup","input",[e])):(this.$emit("input",e),this.selfModel=e)}},isChecked:function(){return"[object Boolean]"==={}.toString.call(this.model)?this.model:Array.isArray(this.model)?this.model.indexOf(this.label)>-1:null!==this.model&&void 0!==this.model?this.model===this.trueLabel:void 0},isGroup:function(){for(var e=this.$parent;e;){if("ElCheckboxGroup"===e.$options.componentName)return this._checkboxGroup=e,!0;e=e.$parent}return!1},store:function(){return this._checkboxGroup?this._checkboxGroup.value:this.value},isDisabled:function(){return this.isGroup?this._checkboxGroup.disabled||this.disabled||(this.elForm||{}).disabled:this.disabled||(this.elForm||{}).disabled},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},checkboxSize:function(){var e=this.size||this._elFormItemSize||(this.$ELEMENT||{}).size;return this.isGroup&&this._checkboxGroup.checkboxGroupSize||e}},props:{value:{},label:{},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:String,trueLabel:[String,Number],falseLabel:[String,Number],id:String,controls:String,border:Boolean,size:String},methods:{addToStore:function(){Array.isArray(this.model)&&-1===this.model.indexOf(this.label)?this.model.push(this.label):this.model=this.trueLabel||!0},handleChange:function(e){var t=this;if(!this.isLimitExceeded){var i=void 0;i=e.target.checked?void 0===this.trueLabel||this.trueLabel:void 0!==this.falseLabel&&this.falseLabel,this.$emit("change",i,e),this.$nextTick(function(){t.isGroup&&t.dispatch("ElCheckboxGroup","change",[t._checkboxGroup.value])})}}},created:function(){this.checked&&this.addToStore()},mounted:function(){this.indeterminate&&this.$el.setAttribute("aria-controls",this.controls)},watch:{value:function(e){this.dispatch("ElFormItem","el.form.change",e)}}},A={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("label",{staticClass:"el-checkbox",class:[e.border&&e.checkboxSize?"el-checkbox--"+e.checkboxSize:"",{"is-disabled":e.isDisabled},{"is-bordered":e.border},{"is-checked":e.isChecked}],attrs:{role:"checkbox","aria-checked":e.indeterminate?"mixed":e.isChecked,"aria-disabled":e.isDisabled,id:e.id}},[i("span",{staticClass:"el-checkbox__input",class:{"is-disabled":e.isDisabled,"is-checked":e.isChecked,"is-indeterminate":e.indeterminate,"is-focus":e.focus},attrs:{"aria-checked":"mixed"}},[i("span",{staticClass:"el-checkbox__inner"}),e._v(" "),e.trueLabel||e.falseLabel?i("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"el-checkbox__original",attrs:{type:"checkbox","aria-hidden":"true",name:e.name,disabled:e.isDisabled,"true-value":e.trueLabel,"false-value":e.falseLabel},domProps:{checked:Array.isArray(e.model)?e._i(e.model,null)>-1:e._q(e.model,e.trueLabel)},on:{change:[function(t){var i=e.model,n=t.target,o=n.checked?e.trueLabel:e.falseLabel;if(Array.isArray(i)){var r=e._i(i,null);n.checked?r<0&&(e.model=i.concat([null])):r>-1&&(e.model=i.slice(0,r).concat(i.slice(r+1)))}else e.model=o},e.handleChange],focus:function(t){e.focus=!0},blur:function(t){e.focus=!1}}}):i("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"el-checkbox__original",attrs:{type:"checkbox","aria-hidden":"true",disabled:e.isDisabled,name:e.name},domProps:{value:e.label,checked:Array.isArray(e.model)?e._i(e.model,e.label)>-1:e.model},on:{change:[function(t){var i=e.model,n=t.target,o=!!n.checked;if(Array.isArray(i)){var r=e.label,a=e._i(i,r);n.checked?a<0&&(e.model=i.concat([r])):a>-1&&(e.model=i.slice(0,a).concat(i.slice(a+1)))}else e.model=o},e.handleChange],focus:function(t){e.focus=!0},blur:function(t){e.focus=!1}}})]),e._v(" "),e.$slots.default||e.label?i("span",{staticClass:"el-checkbox__label"},[e._t("default"),e._v(" "),e.$slots.default?e._e():[e._v(e._s(e.label))]],2):e._e()])},staticRenderFns:[]},T=i("C7Lr")(O,A,!1,null,null,null).exports;T.install=function(e){e.component(T.name,T)};var B={name:"ElTreeNode",componentName:"ElTreeNode",mixins:[K],props:{onlyShow:{type:Boolean,default:!1},node:{default:function(){return{}}},props:{},renderContent:Function,renderAfterExpand:{type:Boolean,default:!0}},components:{ElCollapseTransition:S,ElCheckbox:T,NodeContent:{props:{node:{required:!0}},render:function(e){var t=this.$parent,i=t.tree,n=this.node,o=n.data,r=n.store;return t.renderContent?t.renderContent.call(t._renderProxy,e,{_self:i.$vnode.context,node:n,data:o,store:r}):i.$scopedSlots.default?i.$scopedSlots.default({node:n,data:o}):e("span",{class:"el-tree-node__label"},[n.label,e("b",{class:"btn-text-tip"},[n.data.buttonList&&n.data.buttonList.length>0?"（ 以下为该菜单操作权限 ）":""])])}}},data:function(){return{tree:null,expanded:!1,childNodeRendered:!1,showCheckbox:!1,oldChecked:null,oldIndeterminate:null}},watch:{"node.indeterminate":function(e){this.handleSelectChange(this.node.checked,e)},"node.checked":function(e){this.handleSelectChange(e,this.node.indeterminate)},"node.expanded":function(e){var t=this;this.$nextTick(function(){return t.expanded=e}),e&&(this.childNodeRendered=!0)}},methods:{getNodeKey:function(e){return y(this.tree.nodeKey,e.data)},handleSelectChange:function(e,t){this.oldChecked!==e&&this.oldIndeterminate!==t&&this.tree.$emit("check-change",this.node.data,e,t),this.oldChecked=e,this.indeterminate=t},handleClick:function(){var e=this.tree.store;e.setCurrentNode(this.node),this.tree.$emit("current-change",e.currentNode?e.currentNode.data:null,e.currentNode),this.tree.currentNode=this,this.tree.expandOnClickNode&&this.handleExpandIconClick(),this.tree.checkOnClickNode&&!this.node.disabled&&this.handleCheckChange(null,{target:{checked:!this.node.checked}}),this.tree.$emit("node-click",this.node.data,this.node,this)},handleContextMenu:function(e){this.tree._events["node-contextmenu"]&&this.tree._events["node-contextmenu"].length>0&&(e.stopPropagation(),e.preventDefault()),this.tree.$emit("node-contextmenu",e,this.node.data,this.node,this)},handleExpandIconClick:function(){this.node.isLeaf||(this.expanded?(this.tree.$emit("node-collapse",this.node.data,this.node,this),this.node.collapse()):(this.node.expand(),this.$emit("node-expand",this.node.data,this.node,this)))},handleCheckChange:function(e,t){var i=this;this.node.setChecked(t.target.checked,!this.tree.checkStrictly),this.$nextTick(function(){var e=i.tree.store;i.tree.$emit("check",i.node.data,{checkedNodes:e.getCheckedNodes(),checkedKeys:e.getCheckedKeys(),halfCheckedNodes:e.getHalfCheckedNodes(),halfCheckedKeys:e.getHalfCheckedKeys()})})},handleChildNodeExpand:function(e,t,i){this.broadcast("ElTreeNode","tree-node-expand",t),this.tree.$emit("node-expand",e,t,i)},handleDragStart:function(e){this.tree.draggable&&this.tree.$emit("tree-node-drag-start",e,this)},handleDragOver:function(e){this.tree.draggable&&(this.tree.$emit("tree-node-drag-over",e,this),e.preventDefault())},handleDrop:function(e){e.preventDefault()},handleDragEnd:function(e){this.tree.draggable&&this.tree.$emit("tree-node-drag-end",e,this)}},created:function(){var e=this,t=this.$parent;t.isTree?this.tree=t:this.tree=t.tree;var i=this.tree,n=(i.props||{}).children||"children";this.$watch("node.data."+n,function(){e.node.updateChildren()}),this.showCheckbox=i.showCheckbox,this.node.expanded&&(this.expanded=!0,this.childNodeRendered=!0),this.tree.accordion&&this.$on("tree-node-expand",function(t){e.node!==t&&e.node.collapse()})}},P={render:function(){var e=this,t=this,i=t.$createElement,n=t._self._c||i;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.node.visible,expression:"node.visible"}],ref:"node",staticClass:"el-tree-node",class:{"is-expanded":t.expanded,"is-current":t.tree.store.currentNode===t.node,"is-hidden":!t.node.visible,"is-focusable":!t.node.disabled,"is-checked":!t.node.disabled&&t.node.checked,"no-el-tree-node__content":t.onlyShow&&1!=t.node.data.hasRight},attrs:{role:"treeitem",tabindex:"-1","aria-expanded":t.expanded,"aria-disabled":t.node.disabled,"aria-checked":t.node.checked,draggable:t.tree.draggable},on:{contextmenu:function(t){return e.handleContextMenu(t)},dragstart:function(e){return e.stopPropagation(),t.handleDragStart(e)},dragover:function(e){return e.stopPropagation(),t.handleDragOver(e)},dragend:function(e){return e.stopPropagation(),t.handleDragEnd(e)},drop:function(e){return e.stopPropagation(),t.handleDrop(e)}}},[n("div",{staticClass:"el-tree-node__content",class:{"no-el-tree-node__content":t.onlyShow&&1!=t.node.data.hasRight},style:{"margin-left":(t.node.level-1)*t.tree.indent+"px"}},[n("span",{class:[{"is-leaf":t.node.isLeaf,expanded:!t.node.isLeaf&&t.expanded},"el-tree-node__expand-icon",t.tree.iconClass?t.tree.iconClass:"el-icon-caret-right"],on:{click:function(e){return e.stopPropagation(),t.handleExpandIconClick(e)}}}),t._v(" "),t.showCheckbox?n("el-checkbox",{attrs:{indeterminate:t.node.indeterminate,disabled:!!t.node.disabled},on:{change:t.handleCheckChange},nativeOn:{click:function(e){e.stopPropagation()}},model:{value:t.node.checked,callback:function(e){t.$set(t.node,"checked",e)},expression:"node.checked"}}):t._e(),t._v(" "),t.node.loading?n("span",{staticClass:"el-tree-node__loading-icon el-icon-loading",on:{click:function(e){return e.stopPropagation(),t.handleClick(e)}}}):t._e(),t._v(" "),n("node-content",{attrs:{node:t.node}})],1),t._v(" "),n("el-collapse-transition",[!t.renderAfterExpand||t.childNodeRendered?n("div",{directives:[{name:"show",rawName:"v-show",value:t.expanded,expression:"expanded"}],staticClass:"el-tree-node__children",class:{"btn-content":t.node.data.buttonList&&t.node.data.buttonList.length>0&&t.node.data.childList&&t.node.data.childList.length>t.node.data.buttonList.length,"no-right-line":!t.node.data.childList||t.node.data.childList.length<1},attrs:{role:"group","aria-expanded":t.expanded}},t._l(t.node.childNodes,function(e){return n("el-tree-node",{key:t.getNodeKey(e),class:{"wei-btn-wrap":e.data.btn,"no-wei-btn-wrap":!e.data.btn,"no-el-tree-node":t.onlyShow&&1==e.data.hasRight},attrs:{onlyShow:t.onlyShow,"render-content":t.renderContent,"render-after-expand":t.renderAfterExpand,node:e},on:{"node-expand":t.handleChildNodeExpand}})}),1):t._e()])],1)},staticRenderFns:[]};var j=i("C7Lr")(B,P,!1,function(e){i("6UY/")},"data-v-cb6a5de6",null).exports,F=i("/ZBN"),R=i.n(F);const M=Object.prototype.hasOwnProperty;const z=/(%|)\{([0-9a-zA-Z_]+)\}/g;const W=function(e){return function(e,...t){return 1===t.length&&"object"==typeof t[0]&&(t=t[0]),t&&t.hasOwnProperty||(t={}),e.replace(z,(o,r,a,s)=>{let d;return"{"===e[s-1]&&"}"===e[s+o.length]?a:(i=t,n=a,null===(d=M.call(i,n)?t[a]:null)||void 0===d?"":d)});var i,n}}(L.default);let G={el:{colorpicker:{confirm:"确定",clear:"清空"},datepicker:{now:"此刻",today:"今天",cancel:"取消",clear:"清空",confirm:"确定",selectDate:"选择日期",selectTime:"选择时间",startDate:"开始日期",startTime:"开始时间",endDate:"结束日期",endTime:"结束时间",prevYear:"前一年",nextYear:"后一年",prevMonth:"上个月",nextMonth:"下个月",year:"年",month1:"1 月",month2:"2 月",month3:"3 月",month4:"4 月",month5:"5 月",month6:"6 月",month7:"7 月",month8:"8 月",month9:"9 月",month10:"10 月",month11:"11 月",month12:"12 月",weeks:{sun:"日",mon:"一",tue:"二",wed:"三",thu:"四",fri:"五",sat:"六"},months:{jan:"一月",feb:"二月",mar:"三月",apr:"四月",may:"五月",jun:"六月",jul:"七月",aug:"八月",sep:"九月",oct:"十月",nov:"十一月",dec:"十二月"}},select:{loading:"加载中",noMatch:"无匹配数据",noData:"无数据",placeholder:"请选择"},cascader:{noMatch:"无匹配数据",loading:"加载中",placeholder:"请选择"},pagination:{goto:"前往",pagesize:"条/页",total:"共 {total} 条",pageClassifier:"页"},messagebox:{title:"提示",confirm:"确定",cancel:"取消",error:"输入的数据不合法!"},upload:{deleteTip:"按 delete 键可删除",delete:"删除",preview:"查看图片",continue:"继续上传"},table:{emptyText:"暂无数据",confirmFilter:"筛选",resetFilter:"重置",clearFilter:"全部",sumText:"合计"},tree:{emptyText:"暂无数据"},transfer:{noMatch:"无匹配数据",noData:"无数据",titles:["列表 1","列表 2"],filterPlaceholder:"请输入搜索内容",noCheckedFormat:"共 {total} 项",hasCheckedFormat:"已选 {checked}/{total} 项"},image:{error:"加载失败"}}},q=!1,H=function(){const e=Object.getPrototypeOf(this||L.default).$t;if("function"==typeof e&&L.default.locale)return q||(q=!0,L.default.locale(L.default.config.lang,R()(G,L.default.locale(L.default.config.lang)||{},{clone:!0}))),e.apply(this,arguments)};const Y=function(e,t){let i=H.apply(this,arguments);if(null!==i&&void 0!==i)return i;const n=e.split(".");let o=G;for(let e=0,r=n.length;e<r;e++){if(i=o[n[e]],e===r-1)return W(i,t);if(!i)return"";o=i}return""};var U={name:"ElTree",mixins:[K],components:{ElTreeNode:j},data:function(){return{store:null,root:null,currentNode:null,treeItems:null,checkboxItems:[],dragState:{showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0}}},props:{onlyShow:{type:Boolean,default:!1},data:{type:Array},emptyText:{type:String,default:function(){return Y("el.tree.emptyText")}},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkDescendants:{type:Boolean,default:!1},autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:Function,showCheckbox:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrag:Function,allowDrop:Function,props:{default:function(){return{children:"children",label:"label",disabled:"disabled"}}},lazy:{type:Boolean,default:!1},highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},iconClass:String},computed:{children:{set:function(e){this.data=e},get:function(){return this.data}},treeItemArray:function(){return Array.prototype.slice.call(this.treeItems)},isEmpty:function(){var e=this.root.childNodes;return!e||0===e.length||e.every(function(e){return!e.visible})}},watch:{defaultCheckedKeys:function(e){this.store.setDefaultCheckedKey(e)},defaultExpandedKeys:function(e){this.store.defaultExpandedKeys=e,this.store.setDefaultExpandedKeys(e)},data:function(e){this.store.setData(e)},checkboxItems:function(e){Array.prototype.forEach.call(e,function(e){e.setAttribute("tabindex",-1)})},checkStrictly:function(e){this.store.checkStrictly=e}},methods:{filter:function(e){if(!this.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");this.store.filter(e)},getNodeKey:function(e){return y(this.nodeKey,e.data)},getNodePath:function(e){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");var t=this.store.getNode(e);if(!t)return[];for(var i=[t.data],n=t.parent;n&&n!==this.root;)i.push(n.data),n=n.parent;return i.reverse()},getCheckedNodes:function(e,t){return this.store.getCheckedNodes(e,t)},getCheckedKeys:function(e){return this.store.getCheckedKeys(e)},getCurrentNode:function(){var e=this.store.getCurrentNode();return e?e.data:null},getCurrentKey:function(){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");var e=this.getCurrentNode();return e?e[this.nodeKey]:null},setCheckedNodes:function(e,t){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");this.store.setCheckedNodes(e,t)},setCheckedKeys:function(e,t){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");this.store.setCheckedKeys(e,t)},setChecked:function(e,t,i){this.store.setChecked(e,t,i)},getHalfCheckedNodes:function(){return this.store.getHalfCheckedNodes()},getHalfCheckedKeys:function(){return this.store.getHalfCheckedKeys()},setCurrentNode:function(e){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");this.store.setUserCurrentNode(e)},setCurrentKey:function(e){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");this.store.setCurrentNodeKey(e)},getNode:function(e){return this.store.getNode(e)},remove:function(e){this.store.remove(e)},append:function(e,t){this.store.append(e,t)},insertBefore:function(e,t){this.store.insertBefore(e,t)},insertAfter:function(e,t){this.store.insertAfter(e,t)},handleNodeExpand:function(e,t,i){this.broadcast("ElTreeNode","tree-node-expand",t),this.$emit("node-expand",e,t,i)},updateKeyChildren:function(e,t){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");this.store.updateChildren(e,t)},initTabIndex:function(){this.treeItems=this.$el.querySelectorAll(".is-focusable[role=treeitem]"),this.checkboxItems=this.$el.querySelectorAll("input[type=checkbox]");var e=this.$el.querySelectorAll(".is-checked[role=treeitem]");e.length?e[0].setAttribute("tabindex",0):this.treeItems[0]&&this.treeItems[0].setAttribute("tabindex",0)},handleKeydown:function(e){var t=e.target;if(-1!==t.className.indexOf("el-tree-node")){var i=e.keyCode;this.treeItems=this.$el.querySelectorAll(".is-focusable[role=treeitem]");var n=this.treeItemArray.indexOf(t),o=void 0;[38,40].indexOf(i)>-1&&(e.preventDefault(),o=38===i?0!==n?n-1:0:n<this.treeItemArray.length-1?n+1:0,this.treeItemArray[o].focus()),[37,39].indexOf(i)>-1&&(e.preventDefault(),t.click());var r=t.querySelector('[type="checkbox"]');[13,32].indexOf(i)>-1&&r&&(e.preventDefault(),r.click())}}},created:function(){var e=this;this.isTree=!0,this.store=new w({key:this.nodeKey,data:this.data,lazy:this.lazy,props:this.props,load:this.load,currentNodeKey:this.currentNodeKey,checkStrictly:this.checkStrictly,checkDescendants:this.checkDescendants,defaultCheckedKeys:this.defaultCheckedKeys,defaultExpandedKeys:this.defaultExpandedKeys,autoExpandParent:this.autoExpandParent,defaultExpandAll:this.defaultExpandAll,filterNodeMethod:this.filterNodeMethod}),this.root=this.store.root;var t=this.dragState;this.$on("tree-node-drag-start",function(i,n){if("function"==typeof e.allowDrag&&!e.allowDrag(n.node))return i.preventDefault(),!1;i.dataTransfer.effectAllowed="move";try{i.dataTransfer.setData("text/plain","")}catch(e){}t.draggingNode=n,e.$emit("node-drag-start",n.node,i)}),this.$on("tree-node-drag-over",function(i,n){var o=function(e,t){for(var i=e;i&&"BODY"!==i.tagName;){if(i.__vue__&&i.__vue__.$options.name===t)return i.__vue__;i=i.parentNode}return null}(i.target,"ElTreeNode"),r=t.dropNode;r&&r!==o&&I(r.$el,"is-drop-inner");var a=t.draggingNode;if(a&&o){var s=!0,d=!0,l=!0,h=!0;"function"==typeof e.allowDrop&&(s=e.allowDrop(a.node,o.node,"prev"),h=d=e.allowDrop(a.node,o.node,"inner"),l=e.allowDrop(a.node,o.node,"next")),i.dataTransfer.dropEffect=d?"move":"none",(s||d||l)&&r!==o&&(r&&e.$emit("node-drag-leave",a.node,r.node,i),e.$emit("node-drag-enter",a.node,o.node,i)),(s||d||l)&&(t.dropNode=o),o.node.nextSibling===a.node&&(l=!1),o.node.previousSibling===a.node&&(s=!1),o.node.contains(a.node,!1)&&(d=!1),(a.node===o.node||a.node.contains(o.node))&&(s=!1,d=!1,l=!1);var c=o.$el.getBoundingClientRect(),u=e.$el.getBoundingClientRect(),f=void 0,p=s?d?.25:l?.45:1:-1,g=l?d?.75:s?.55:0:1,v=-9999,m=i.clientY-c.top;f=m<c.height*p?"before":m>c.height*g?"after":d?"inner":"none";var y=o.$el.querySelector(".el-tree-node__expand-icon").getBoundingClientRect(),k=e.$refs.dropIndicator;"before"===f?v=y.top-u.top:"after"===f&&(v=y.bottom-u.top),k.style.top=v+"px",k.style.left=y.right-u.left+"px","inner"===f?$(o.$el,"is-drop-inner"):I(o.$el,"is-drop-inner"),t.showDropIndicator="before"===f||"after"===f,t.allowDrop=t.showDropIndicator||h,t.dropType=f,e.$emit("node-drag-over",a.node,o.node,i)}}),this.$on("tree-node-drag-end",function(i){var n=t.draggingNode,o=t.dropType,r=t.dropNode;if(i.preventDefault(),i.dataTransfer.dropEffect="move",n&&r){var a={data:n.node.data};"none"!==o&&n.node.remove(),"before"===o?r.node.parent.insertBefore(a,r.node):"after"===o?r.node.parent.insertAfter(a,r.node):"inner"===o&&r.node.insertChild(a),"none"!==o&&e.store.registerNode(a),I(r.$el,"is-drop-inner"),e.$emit("node-drag-end",n.node,r.node,o,i),"none"!==o&&e.$emit("node-drop",n.node,r.node,o,i)}n&&!r&&e.$emit("node-drag-end",n.node,null,o,i),t.showDropIndicator=!1,t.draggingNode=null,t.dropNode=null,t.allowDrop=!0})},mounted:function(){this.initTabIndex(),this.$el.addEventListener("keydown",this.handleKeydown)},updated:function(){this.treeItems=this.$el.querySelectorAll("[role=treeitem]"),this.checkboxItems=this.$el.querySelectorAll("input[type=checkbox]")}},Z={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"el-tree",class:{"el-tree--highlight-current":e.highlightCurrent,"is-dragging":!!e.dragState.draggingNode,"is-drop-not-allow":!e.dragState.allowDrop,"is-drop-inner":"inner"===e.dragState.dropType},attrs:{role:"tree"}},[e._l(e.root.childNodes,function(t){return i("el-tree-node",{key:e.getNodeKey(t),attrs:{node:t,props:e.props,onlyShow:e.onlyShow,"render-after-expand":e.renderAfterExpand,"render-content":e.renderContent},on:{"node-expand":e.handleNodeExpand}})}),e._v(" "),e.isEmpty?i("div",{staticClass:"el-tree__empty-block"},[i("span",{staticClass:"el-tree__empty-text"},[e._v(e._s(e.emptyText))])]):e._e(),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.dragState.showDropIndicator,expression:"dragState.showDropIndicator"}],ref:"dropIndicator",staticClass:"el-tree__drop-indicator"})],2)},staticRenderFns:[]},Q=i("C7Lr")(U,Z,!1,null,null,null);t.a=Q.exports},m5p0:function(e,t,i){i("IHur"),e.exports=i("/KQr").Object.keys},xSur:function(e,t,i){"use strict";t.__esModule=!0;var n,o=i("liLe"),r=(n=o)&&n.__esModule?n:{default:n};t.default=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,r.default)(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}()}});